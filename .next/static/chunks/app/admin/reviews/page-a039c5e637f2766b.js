(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),r=a(1130),i=a(2115),l=a(5561),c=a(8564),n=a(4616),d=a(7888),o=a(2525);function m(){let[e,t]=(0,i.useState)([]),[a,m]=(0,i.useState)(!0),[u,x]=(0,i.useState)(!1),[h,y]=(0,i.useState)(null),[g,f]=(0,i.useState)({name:"",rating:"5",comment:""}),p=(0,r.createBrowserClient)("https://qvuciogdztbaazivvptv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF2dWNpb2dkenRiYWF6aXZ2cHR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYxMDUyODUsImV4cCI6MjA2MTY4MTI4NX0.CyQMnBuKri2M59uAar7doIi_o6UO7RJhVIv0bHT6aVI");(0,i.useEffect)(()=>{v()},[]);let v=async()=>{try{let{data:e,error:a}=await p.from("reviews").select("*").order("created_at",{ascending:!1});if(a)throw a;t(e||[])}catch(e){console.error("Error fetching reviews:",e)}finally{m(!1)}},b=async e=>{e.preventDefault(),m(!0);try{let e={name:g.name,rating:parseInt(g.rating),comment:g.comment};if(h){let{error:t}=await p.from("reviews").update(e).eq("id",h.id);if(t)throw t}else{let{error:t}=await p.from("reviews").insert(e);if(t)throw t}await v(),x(!1),j()}catch(e){console.error("Error saving review:",e)}finally{m(!1)}},w=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cet avis ?"))try{let{error:t}=await p.from("reviews").delete().eq("id",e);if(t)throw t;await v()}catch(e){console.error("Error deleting review:",e)}},j=()=>{f({name:"",rating:"5",comment:""}),y(null)},N=e=>{y(e),f({name:e.name,rating:e.rating.toString(),comment:e.comment}),x(!0)},k=e=>Array.from({length:5}).map((t,a)=>(0,s.jsx)(c.A,{className:"w-5 h-5 ".concat(a<e?"text-yellow-400 fill-current":"text-gray-300")},a));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-custom-grey",children:"Gestion des Avis"}),(0,s.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{j(),x(!0)},className:"bg-accent-red text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,s.jsx)(n.A,{size:20}),"Ajouter un avis"]})]}),a?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent-red"})}):(0,s.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-custom-grey",children:e.name}),(0,s.jsx)("div",{className:"flex gap-1",children:k(e.rating)})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:e.comment}),(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:new Date(e.created_at).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>N(e),className:"text-accent-red hover:text-accent-red/80",children:(0,s.jsx)(d.A,{size:20})}),(0,s.jsx)(l.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(e.id),className:"text-red-500 hover:text-red-400",children:(0,s.jsx)(o.A,{size:20})})]})]},e.id))}),u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-custom-grey mb-4",children:h?"Modifier l'avis":"Ajouter un avis"}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),(0,s.jsx)("input",{type:"text",value:g.name,onChange:e=>f({...g,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-accent-red focus:ring-accent-red",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Note"}),(0,s.jsx)("select",{value:g.rating,onChange:e=>f({...g,rating:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-accent-red focus:ring-accent-red",required:!0,children:[1,2,3,4,5].map(e=>(0,s.jsxs)("option",{value:e,children:[e," \xe9toile",e>1?"s":""]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Commentaire"}),(0,s.jsx)("textarea",{value:g.comment,onChange:e=>f({...g,comment:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-accent-red focus:ring-accent-red",required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{x(!1),j()},className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-accent-red text-white rounded-lg hover:bg-accent-red/90 disabled:opacity-50",children:a?"Enregistrement...":"Enregistrer"})]})]})]})})]})}},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]])},6219:(e,t,a)=>{Promise.resolve().then(a.bind(a,4363))},7888:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Edit",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",key:"1cs3r3"}]])},8564:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2895).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[130,95,441,684,358],()=>t(6219)),_N_E=e.O()}]);